# 目次
 
1. [今後の拡張案](#1今後の拡張案)  
2. [参考資料・用語集](#2参考資料・用語集)

---
# 1.今後の拡張案

本章では、現時点では実装対象外とするが、将来的な機能拡張や改善の方向性として検討されている案を列挙する。

### 1. Web UI の導入

- 学習・適用結果の可視化（サンプリング行数、推定根拠、実行時間など）
- クエリ指定・モデル選択・dry-run実行をGUIから操作可能にする
- 統計情報の推移を時系列で確認できるダッシュボードの提供

### 2. モデルの継続学習・評価機構

- 実行ログ（推定値と実際のパフォーマンス）の蓄積に基づく自動再学習
- 定期的なモデル評価と自動リプレース
- CI/CDパイプラインとの連携（精度閾値を満たさないモデルのデプロイ防止）

### 3. マルチノード／クラスタ対応

- PostgreSQLクラスタ環境でのモデル適用ロジックの拡張
- クエリルーティング先ごとの統計情報差異への対応

### 4. 設定ファイル／環境変数の柔軟化

- `.yaml`や`.toml`による構成情報管理
- サンプル行数の上限・下限や除外テーブルルールを外部ファイル化

### 5. セキュリティ・運用面の強化

- 実行ログの暗号化／改ざん検知
- API連携時のJWT認証、RBACの導入
- cronやAirflowなどによるスケジューリング対応

### 6. 対応RDBの拡大（中長期）

- 現在はPostgreSQLに特化しているが、将来的に以下のRDB製品も視野
  - Amazon Aurora PostgreSQL
  - Greenplum / YugabyteDB
  - MySQL系（サンプリング方式が異なるため要設計見直し）



※ 上記はあくまで構想段階のものであり、実装の優先順位はPoC結果やユーザー要望、運用実績などに応じて判断される。


---


# 2.参考資料・用語集


### 1. 参考資料

| 資料名 | 内容・用途 | URL |
|--------|------------|-----|
| PostgreSQL日本語公式サイト | PostgreSQLの基本仕様、ANALYZEの動作、システムカタログの構造などを調査する際に活用 | https://www.postgresql.jp/ |
| PostgreSQL公式ドキュメント（英語） | 統計情報の収集方法、default_statistics_target の仕様、パーティション構造等の技術解説 | https://www.postgresql.org/docs/ |
| scikit-learn公式ドキュメント | 回帰モデルや特徴量設計に関する指針を参照 | https://scikit-learn.org/stable/ |


### 2. 用語集（PostgreSQLシステムビュー・テーブル）

| 用語 | 説明 |
|------|------|
| pg_class | テーブル・インデックスなどの基本情報を保持するシステムカタログ。行数（reltuples）やページ数（relpages）などが格納される。 |
| pg_stat_all_tables | テーブルごとのアクセス統計情報を保持するビュー。挿入・更新・削除数やライブタプル数、死んだタプル数などが取得できる。 |
| pg_stat_user_indexes | ユーザー定義インデックスのスキャン回数や読み取り件数などの統計情報を提供するビュー。 |
| pg_stats | ANALYZE により収集された列単位の統計情報を確認するためのビュー。n_distinct, null_frac, correlation などが確認できる。 |
| pg_attribute | テーブルやビューの列に関する情報を保持するシステムカタログ。列名、順番、統計ターゲットなどを管理。 |
| pg_namespace | スキーマ（名前空間）に関する情報を管理するカタログ。スキーマ名とIDのマッピングなどを含む。 |
| pg_stat_progress_analyze | ANALYZE 実行中の進捗状況を確認できるビュー。ブロック数や現在の処理状態などを可視化可能。 |
| pg_stat_io | PostgreSQL 16以降で利用可能な、I/O統計に関する新しいビュー。ブロックの読み書き状況などを詳細に確認できる。 |


### 3. その他の用語・略語

| 用語・略語 | 説明 |
|------------|------|
| ANALYZE | PostgreSQLで統計情報を収集・更新するコマンド。実行計画の精度向上に不可欠。 |
| default_statistics_target | 各列の統計情報の精度（対象行数）を制御するPostgreSQLのパラメータ。デフォルト値は100。 |
| reltuples | pg_class に格納される、テーブル内の推定行数。ANALYZE後に更新される。 |
| n_distinct | 列内に存在するユニークな値の推定個数。選択性推定に用いられる。 |
| correlation | カラム値の並び順と物理順序の相関（-1〜1）。インデックス効率に影響する。 |
| null_frac | 列におけるNULLの割合。統計的な選択性計算に利用される。 |
| FDW（Foreign Data Wrapper） | 外部データソースをPostgreSQL内にマッピングする機構。FDWテーブルはANALYZE非対応。 |
| PoC（Proof of Concept） | 概念実証。仕組みの実効性を検証する段階的取り組み。 |
| dry-run | 実行処理を行わず、結果や挙動のみを確認するモード。安全性検証などに用いる。 |
| 回帰モデル（Regression Model） | 数値を予測するAI手法の一つ。統計情報に基づくサンプリング行数の推定に利用される。 |
| relkind | pg_class のカラムで、オブジェクトの種別（テーブル、インデックス、ビューなど）を示す。 |